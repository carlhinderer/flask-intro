-----------------------------------------------------------------------
|  CHAPTER 5 - DATABASES                                              |
-----------------------------------------------------------------------

- Database Access with Flask-SQLAlchemy

    - SQLAlchemy is a powerful relational database framework that supports several
        database backends.  It offers a high-level ORM and low-level access to the database's
        native SQL functionality.

        $ pip install flask-sqlalchemy


    - In Flask-SQLAlchemy, a database is specified as a URL.

        Database engine            URL
        ---------------------------------------------------------------------
        MySQL                      mysql://username:password@hostname/database

        Postgres                   postgresql://username:password@hostname/database

        SQLite (Linux, macOS)      sqlite:////absolute/path/to/database


    - The URL of the application database must be configured as the key 
        'SQLALCHEMY_DATABASE_URI' in the Flask config object.  The documentation also recommends
        setting 'SQLALCHEMY_TRACK_MODIFICATIONS' to False to use less memory unless signals for
        object changes are needed.


        import os
        from flask_sqlalchemy import SQLAlchemy

        db_url = 'postgresql://flaskexampleuser:flaskexamplepw@localhost/flaskexample'
        app.config['SQLALCHEMY_DATABASE_URI'] = db_url
        app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
        
        db = SQLAlchemy(app)



- Model Definitions

    - Here are model definitions for the 'Role' and 'User' tables.

        # hello.py

        class Role(db.Model):
            __tablename__ = 'roles'
            id = db.Column(db.Integer, primary_key=True)
            name = db.Column(db.String(64), unique=True)
        
            def __repr__(self):
                return '<Role %r>' % self.name
        

        class User(db.Model):
            __tablename__ = 'users'
            id = db.Column(db.Integer, primary_key=True)
            username = db.Column(db.String(64), unique=True, index=True)
        
            def __repr__(self):
                return '<User %r>' % self.username


    - The '__tablename__' class variable defines the name of the table in the database.  If
        it's not specified, a default table name will be created.  

      The poplular convention is to pluralize the table names, so we typically want to name them
        manually to do that.